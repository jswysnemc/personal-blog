---
import { useTranslations, type Lang } from '../lib/i18n';

interface Props {
  categories: string[];
  currentCategory?: string;
  lang?: Lang;
}

const { categories, currentCategory, lang = 'zh' } = Astro.props;
const t = useTranslations(lang);
const basePath = lang === 'zh' ? '' : `/${lang}`;
---

<div class="flex flex-wrap gap-3 mb-8">
  <a
    href={`${basePath}/blog`}
    class:list={[
      'px-4 py-2 rounded-full text-sm font-medium transition-colors',
      !currentCategory
        ? 'bg-primary-900 text-white'
        : 'bg-primary-100 text-primary-600 hover:bg-primary-200'
    ]}
  >
    {t('blog.all')}
  </a>

  {categories.map(cat => {
    const categoryKey = `category.${cat}` as keyof typeof import('../lib/i18n').ui.zh;
    return (
      <a
        href={`${basePath}/category/${cat}`}
        class:list={[
          'px-4 py-2 rounded-full text-sm font-medium transition-colors',
          currentCategory === cat
            ? 'bg-primary-900 text-white'
            : 'bg-primary-100 text-primary-600 hover:bg-primary-200'
        ]}
      >
        {t(categoryKey)}
      </a>
    );
  })}
</div>
